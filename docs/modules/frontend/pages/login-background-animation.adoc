= Animation de Fond de Connexion
:description: Guide technique et utilisateur pour l'animation dynamique moderne des pages de connexion et d'inscription
:keywords: animation, login, IA, particules, réseau neuronal, performance
:page-tags: frontend, animation, login, ui-ux

== Vue d'ensemble

La nouvelle fonctionnalité d'animation de fond transforme l'expérience de connexion IBIS-X en remplaçant l'image statique par une animation dynamique inspirée de l'intelligence artificielle.

=== Objectifs

* **Modernisation** : Interface plus engageante et moderne
* **Identité visuelle** : Cohérence avec la charte graphique Sorbonne (#242e54)
* **Performance** : Animation optimisée GPU, <500ko, temps de chargement minimal
* **Accessibilité** : Adaptation mobile et respect des préférences utilisateur

== Types d'Animation

=== 1. Réseau Neuronal (Login)
Animation sophistiquée représentant un réseau de neurones avec particules connectées.

**Caractéristiques :**
* 40 particules interconnectées
* Lignes dynamiques entre particules proches
* Mouvement brownien avec attraction centrale
* Couleurs : #242e54 (principal), #3b4b8c (secondaire), #d4a574 (accent)

```typescript
<app-login-background-animation
  [animationType]="'neural-network'"
  [maxWidth]="500"
  [height]="400">
</app-login-background-animation>
```

=== 2. Vague de Particules (Inscription)
Animation fluide représentant un flux de données intelligent.

**Caractéristiques :**
* 60 particules en mouvement ondulatoire
* Effet de vague sinusoïdale
* Mouvement horizontal progressif
* Opacité variable créant un effet de profondeur

```typescript
<app-login-background-animation
  [animationType]="'particle-wave'"
  [maxWidth]="500"
  [height]="400">
</app-login-background-animation>
```

== Architecture Technique

=== Structure du Composant

```
login-background-animation/
├── login-background-animation.component.ts    # Logique principale
├── login-background-animation.component.scss  # Styles responsifs
└── README.md                                  # Documentation
```

=== Technologie Canvas 2D

**Choix technique :** Canvas 2D plutôt que WebGL ou Three.js pour :
* **Compatibilité** : Support universel navigateurs
* **Performance** : Légèreté sur appareils mobiles
* **Maintenance** : Code plus simple et maintenable

=== Optimisations Performance

[cols="1,3"]
|===
|Technique |Description

|**requestAnimationFrame**
|Synchronisation avec le taux de rafraîchissement

|**will-change CSS**
|Optimisation GPU pour les transformations

|**Zone.runOutsideAngular**
|Animation hors cycle de détection Angular

|**Responsive Canvas**
|Adaptation automatique à la densité de pixels

|**Cleanup automatique**
|Libération mémoire en ngOnDestroy
|===

== Adaptation Responsive

=== Desktop (>768px)
* Animation complète Canvas 2D
* 40-60 particules selon le type
* Connexions dynamiques (réseau neuronal)
* Transition fluide vers l'animation

=== Mobile (≤768px)
* Fallback gradient statique élégant
* Animation CSS légère pour les effets de fond
* Préservation de l'identité visuelle
* Performance optimisée

=== Code d'adaptation

```typescript
private checkMobileDevice(): void {
  this.isMobile = window.innerWidth <= 768 || 
    /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
  
  if (this.isMobile) {
    this.canvasOpacity = 0;
    this.fallbackOpacity = 1;
    return;
  }
}
```

== Configuration et Personnalisation

=== Paramètres d'entrée

[cols="1,1,1,3"]
|===
|Propriété |Type |Défaut |Description

|`animationType`
|string
|'neural-network'
|Type d'animation : 'neural-network' ou 'particle-wave'

|`maxWidth`
|number
|500
|Largeur maximale en pixels

|`height`
|number
|400
|Hauteur de l'animation en pixels
|===

=== Configuration avancée

```typescript
private config: AnimationConfig = {
  type: 'neural-network',
  particleCount: 50,
  connectionDistance: 120,
  speed: 0.5,
  colors: {
    primary: '#242e54',    // Sorbonne principal
    secondary: '#3b4b8c',  // Bleu moderne
    accent: '#d4a574'      // Or chaleureux
  }
};
```

== Accessibilité

=== Respect des préférences utilisateur

**Mouvement réduit :**
```css
@media (prefers-reduced-motion: reduce) {
  .animation-container {
    .fallback-gradient {
      animation: none !important;
    }
  }
}
```

**Mode sombre :**
```css
@media (prefers-color-scheme: dark) {
  .animation-container .animation-canvas {
    background: linear-gradient(135deg, 
      rgba(36, 46, 84, 0.9) 0%, 
      rgba(59, 75, 140, 0.8) 50%,
      rgba(36, 46, 84, 0.9) 100%
    );
  }
}
```

== Intégration

=== Utilisation dans les composants

**1. Import du composant :**
```typescript
import { LoginBackgroundAnimationComponent } from '../../../components/login-background-animation/login-background-animation.component';
```

**2. Ajout aux imports Angular :**
```typescript
@Component({
  imports: [
    // ... autres imports
    LoginBackgroundAnimationComponent,
  ],
})
```

**3. Utilisation dans le template :**
```html
<div class="col-lg-6">
  <div class="align-items-center justify-content-center d-none d-lg-flex h-100">
    <app-login-background-animation
      [animationType]="'neural-network'"
      [maxWidth]="500"
      [height]="400">
    </app-login-background-animation>
  </div>
</div>
```

=== Remplacement de l'image statique

**Avant :**
```html
<img src="/assets/images/backgrounds/login3-bg.png" 
     alt="login" 
     style="max-width: 500px" />
```

**Après :**
```html
<app-login-background-animation
  [animationType]="'neural-network'"
  [maxWidth]="500"
  [height]="400">
</app-login-background-animation>
```

== Performance et Monitoring

=== Métriques de performance

* **Taille composant** : ~15ko (JS + CSS)
* **Particules max** : 60 (particle-wave)
* **FPS cible** : 60fps
* **Mémoire** : <5Mo pendant l'animation

=== Tests recommandés

```javascript
// Test de performance
const perfStart = performance.now();
// ... animation running
const perfEnd = performance.now();
console.log(`Animation frame time: ${perfEnd - perfStart}ms`);
```

=== Fallback automatique

Le composant bascule automatiquement vers un gradient statique en cas de :
* Erreur Canvas 2D
* Performance insuffisante
* Préférence utilisateur (mouvement réduit)
* Appareil mobile

== Maintenance et Évolution

=== Ajout de nouveaux types d'animation

```typescript
// 1. Étendre l'interface
export type AnimationType = 'neural-network' | 'particle-wave' | 'nouveau-type';

// 2. Modifier la configuration
if (this.animationType === 'nouveau-type') {
  this.config.particleCount = 80;
  this.config.speed = 1.2;
}

// 3. Implémenter la logique spécifique
private updateParticleNouveau(particle: Particle): void {
  // Logique du nouveau type d'animation
}
```

=== Bonnes pratiques

* **Profiling régulier** : Vérifier les performances sur appareils faibles
* **Tests visuels** : Validation sur différentes résolutions
* **Accessibilité** : Tests avec préférences utilisateur variées
* **Fallback robuste** : Garantir un affichage même en cas d'erreur

== Troubleshooting

=== Problèmes courants

[cols="2,3,3"]
|===
|Problème |Cause probable |Solution

|Animation ne s'affiche pas
|Canvas non supporté
|Vérifier le fallback gradient

|Performance dégradée
|Trop de particules
|Réduire particleCount ou connectionDistance

|Animation saccadée
|Ressources insuffisantes
|Optimiser ou basculer vers le fallback

|Affichage incorrect mobile
|CSS responsive manquant
|Vérifier les media queries
|===

=== Debug

```typescript
// Activer le mode debug
private debug = true;

private animate(): void {
  if (this.debug) {
    console.log(`Particles: ${this.particles.length}, FPS: ${this.getCurrentFPS()}`);
  }
  // ... reste de l'animation
}
```

== Voir aussi

* xref:dev-guide/animation-performance-guide.adoc[Guide des performances d'animation]
* xref:dev-guide/responsive-design-patterns.adoc[Patterns de design responsive]
* xref:dev-guide/accessibility-guidelines.adoc[Guidelines d'accessibilité]