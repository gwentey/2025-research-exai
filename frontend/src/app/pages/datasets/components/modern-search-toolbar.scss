// ===============================================
// TOOLBAR DE RECHERCHE SAAS MODERNE
// ===============================================

  .modern-search-toolbar {
    background: #ffffff !important;
    color: #1a202c !important;
    border-radius: 16px;
    padding: 20px 24px; // PADDING UNIFORME
    border: 1px solid #e2e8f0;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);

    // FORCE THÈME CLAIR ABSOLU
    *, *::before, *::after {
      color-scheme: light !important;
      background: transparent !important;
      color: inherit !important;
    }

    // =============================================
    // FORCE BRUTALE HAUTEUR 48PX - TOUS LES CHAMPS
    // =============================================

    // SEARCH FIELD - Force à 48px
    .modern-search-field {
      .mat-mdc-form-field,
      .mat-mdc-form-field .mat-mdc-text-field-wrapper,
      .mat-mdc-form-field .mat-mdc-form-field-flex,
      .mat-mdc-form-field .mat-mdc-form-field-infix {
        height: 48px !important;
        max-height: 48px !important;
        min-height: 48px !important;
        line-height: 48px !important;
      }

      .mat-mdc-form-field input {
        height: 48px !important;
        line-height: 48px !important;
        padding-top: 0 !important;
        padding-bottom: 0 !important;
      }

      .mat-mdc-form-field-subscript-wrapper {
        display: none !important;
        height: 0 !important;
      }
    }

    // SORT FIELD - Force à 48px
    .modern-sort-field {
      .mat-mdc-form-field,
      .mat-mdc-form-field .mat-mdc-text-field-wrapper,
      .mat-mdc-form-field .mat-mdc-form-field-flex,
      .mat-mdc-form-field .mat-mdc-form-field-infix {
        height: 48px !important;
        max-height: 48px !important;
        min-height: 48px !important;
        line-height: 48px !important;
      }

      .mat-mdc-form-field-subscript-wrapper {
        display: none !important;
        height: 0 !important;
      }

      .mat-mdc-select-trigger {
        height: 48px !important;
        line-height: 48px !important;
      }
    }

    // BOUTONS - Force à 48px
    .modern-filters-btn,
    .refresh-btn {
      height: 48px !important;
      max-height: 48px !important;
      min-height: 48px !important;
      box-sizing: border-box !important;
    }

    // VIEW TOGGLE - Force à 48px
    .modern-view-toggle {
      height: 48px !important;
      max-height: 48px !important;
      min-height: 48px !important;

      .mat-button-toggle {
        height: 48px !important;
        max-height: 48px !important;
        min-height: 48px !important;
        line-height: 48px !important;
      }
    }

     .toolbar-content {
     display: flex;
     align-items: center;
     justify-content: space-between; // DISTRIBUTION ÉQUILIBRÉE GAUCHE/DROITE
     gap: 24px;
     flex-wrap: nowrap; // PAS DE WRAP POUR GARDER GAUCHE/DROITE
     min-height: 48px; // HAUTEUR MINIMALE pour alignement parfait

         // Section gauche - Recherche principale
     .toolbar-left {
       flex: 0 0 auto;
       min-width: auto;
       display: flex;
       align-items: center;
       gap: 12px;
       height: 48px; // HAUTEUR FIXE pour alignement parfait

       // Groupe de recherche dans la section gauche
       .search-group {
         display: flex;
         align-items: center;
         height: 48px;

         .modern-search-field {
           min-width: 400px; // BARRE AGRANDIE
           width: 400px; // LARGEUR FIXE AGRANDIE
           height: 48px !important; // HAUTEUR FIXE BRUTALE
           max-height: 48px !important;
           min-height: 48px !important;

           // Masquer les subscripts
           .mat-mdc-form-field-subscript-wrapper {
             display: none;
           }

           // Style du champ
           .mat-mdc-form-field-outline {
             color: #e2e8f0 !important;
           }

           .mat-mdc-form-field-focus-overlay {
             background: #242e54 !important; // BLEU SORBONNE
             opacity: 0.1;
           }

           input {
             color: #1a202c !important;
             caret-color: #242e54 !important; // BLEU SORBONNE
           }

           .mat-mdc-form-field-icon-suffix {
             mat-icon {
               color: #64748b !important;

               &:hover {
                 color: #242e54 !important; // BLEU SORBONNE
               }
             }
           }
         }
       }
     }

    // Section droite - alignement parfait
    .toolbar-right {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 16px;
      flex-wrap: wrap;
      height: 48px; // HAUTEUR FIXE pour alignement parfait
      min-height: 48px;

             // ANCIEN GROUPE DE RECHERCHE SUPPRIMÉ - MAINTENANT À GAUCHE

      // Groupe de filtres - alignement parfait
      .filters-group {
        display: flex;
        align-items: center;
        height: 48px;

        .modern-filters-btn {
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          gap: 8px;
          padding: 0 20px !important;
          background: #f8fafc !important;
          border: 2px solid #e2e8f0 !important;
          border-radius: 12px;
          color: #475569 !important;
          font-weight: 600;
          font-size: 14px;
          cursor: pointer;
          transition: all 0.2s ease;
          position: relative;
          // HAUTEUR FIXE BRUTALE
          height: 48px !important;
          max-height: 48px !important;
          min-height: 48px !important;
          width: auto !important;
          box-sizing: border-box !important;

          // Contenu du bouton
          .btn-content {
            display: flex;
            align-items: center;
            gap: 8px;

            .btn-icon {
              color: #242e54 !important; // BLEU SORBONNE
              font-size: 20px;
              width: 20px;
              height: 20px;
            }

            .btn-text {
              color: #475569 !important;
              font-weight: 600;
            }
          }

          // Badge de comptage
          .filters-badge {
            background: #242e54 !important; // BLEU SORBONNE
            color: #ffffff !important;
            border-radius: 50%;
            min-width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
            margin-left: 4px;
          }

          // État normal
          &:hover {
            background: #f1f5f9 !important;
            border-color: #242e54 !important; // BLEU SORBONNE
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(36, 46, 84, 0.1); // BLEU SORBONNE RGBA
          }

          // État avec filtres actifs
          &.has-filters {
            background: linear-gradient(135deg, #eff6ff 0%, #f0f9ff 100%) !important;
            border-color: #242e54 !important; // BLEU SORBONNE
            box-shadow: 0 0 0 1px rgba(36, 46, 84, 0.1); // BLEU SORBONNE RGBA

            .btn-content {
              .btn-text {
                color: #242e54 !important; // BLEU SORBONNE
              }
            }
          }
        }
      }

      // Groupe de contrôles d'affichage - alignement parfait
      .view-controls-group {
        display: flex;
        align-items: center;
        gap: 12px;
        height: 48px;

                 .modern-view-toggle {
           border-radius: 10px;
           overflow: hidden;
           border: 2px solid #e2e8f0;
           height: 48px !important; // HAUTEUR FIXE BRUTALE
           max-height: 48px !important;
           min-height: 48px !important;
           display: flex !important;
           align-items: center !important;

           ::ng-deep .mat-button-toggle {
             border: none !important;
             background: #ffffff !important;
             color: #64748b !important;
             width: 48px !important;
             height: 48px !important; // HAUTEUR FIXE BRUTALE
             max-height: 48px !important;
             min-height: 48px !important;
             display: flex !important;
             align-items: center !important;
             justify-content: center !important;

             .mat-button-toggle-label-content {
               line-height: 48px !important;
               height: 48px !important;
               max-height: 48px !important;
               min-height: 48px !important;
               display: flex !important;
               align-items: center !important;
               justify-content: center !important;
               padding: 0 !important;
               margin: 0 !important;

               mat-icon {
                 font-size: 20px !important;
                 height: 20px !important;
                 width: 20px !important;
                 color: #64748b !important;
               }
             }

                         &.mat-button-toggle-checked {
              background: #242e54 !important; // BLEU SORBONNE
              color: #ffffff !important;

              mat-icon {
                color: #ffffff !important;
              }
            }

             &:hover:not(.mat-button-toggle-checked) {
               background: #f8fafc !important;
             }
           }
         }

                 .modern-sort-field {
           min-width: 180px;
           width: 216px; // LARGEUR FIXE
           height: 48px !important; // HAUTEUR FIXE BRUTALE
           max-height: 48px !important;
           min-height: 48px !important;

           // FORCE BRUTALE du container Material Select
           ::ng-deep .mat-mdc-form-field {
             height: 48px !important;
             max-height: 48px !important;
             min-height: 48px !important;
             display: flex !important;
             align-items: center !important;

             .mat-mdc-text-field-wrapper {
               height: 48px !important;
               max-height: 48px !important;
               min-height: 48px !important;
               display: flex !important;
               align-items: center !important;

               .mat-mdc-form-field-flex {
                 height: 48px !important;
                 max-height: 48px !important;
                 min-height: 48px !important;
                 align-items: center !important;

                 .mat-mdc-form-field-infix {
                   height: 48px !important;
                   max-height: 48px !important;
                   min-height: 48px !important;
                   padding: 0 16px !important;
                   display: flex !important;
                   align-items: center !important;
                 }
               }
             }

             // SUPPRIMER LES ÉLÉMENTS QUI AJOUTENT DE LA HAUTEUR
             .mat-mdc-form-field-subscript-wrapper {
               display: none !important;
               height: 0 !important;
             }

             .mat-mdc-form-field-bottom-align {
               display: none !important;
               height: 0 !important;
             }

             // FORCE LE SELECT
             .mat-mdc-select {
               height: 48px !important;
               max-height: 48px !important;
               min-height: 48px !important;
               line-height: 48px !important;
             }

             // FORCE LE LABEL
             .mdc-floating-label {
               height: auto !important;
               line-height: normal !important;
             }
           }

           .mat-mdc-form-field-subscript-wrapper {
             display: none;
           }

           .mat-mdc-form-field-outline {
             color: #e2e8f0 !important;
           }

           .mat-mdc-select {
             color: #1a202c !important;
             height: 48px !important;
             line-height: 48px !important;
           }

           .mat-mdc-form-field-focus-overlay {
             background: #242e54 !important; // BLEU SORBONNE
             opacity: 0.1;
           }
         }
      }

             // Actions secondaires - alignement parfait
       .secondary-actions {
         display: flex;
         align-items: center;
         height: 48px;

         .refresh-btn {
           width: 48px;
           height: 48px; // HAUTEUR FIXE pour alignement
           border-radius: 12px;
           background: #f8fafc !important;
           border: 2px solid #e2e8f0 !important;
           color: #242e54 !important; // BLEU SORBONNE
           transition: all 0.2s ease;
           display: flex;
           align-items: center;
           justify-content: center;

           &:hover {
             background: #f1f5f9 !important;
             border-color: #242e54 !important; // BLEU SORBONNE
             transform: translateY(-1px);
             box-shadow: 0 4px 12px rgba(36, 46, 84, 0.1); // BLEU SORBONNE RGBA
           }

           mat-icon {
             color: #242e54 !important; // BLEU SORBONNE
             font-size: 20px;
             width: 20px;
             height: 20px;
           }
         }
       }
    }
  }
}

// ===============================================
// RESPONSIVE
// ===============================================

@media (max-width: 1024px) {
  .modern-search-toolbar {
    .toolbar-content {
      gap: 16px;

      .toolbar-right {
        gap: 12px;

        // Recherche maintenant dans toolbar-left

        .view-controls-group .modern-sort-field {
          min-width: 150px;
        }
      }
    }
  }
}

 @media (max-width: 768px) {
   .modern-search-toolbar {
     .toolbar-content {
       flex-direction: column;
       align-items: stretch;
       gap: 20px;

       .toolbar-left {
         min-width: auto;
         justify-content: center;

         .search-group .modern-search-field {
           min-width: 280px;
           width: 280px; // RÉDUITE SUR MOBILE
         }
       }

      .toolbar-right {
        justify-content: center;
        flex-wrap: wrap;

        // SEARCH GROUP SUPPRIMÉ DE TOOLBAR-RIGHT

        .filters-group,
        .view-controls-group,
        .secondary-actions {
          flex: 1;
          justify-content: center;
        }

        .view-controls-group {
          gap: 8px;

          .modern-sort-field {
            min-width: 120px;
          }
        }
      }
    }
  }
}

@media (max-width: 480px) {
  .modern-search-toolbar {
    .toolbar-content {
      .toolbar-right {
        .filters-group .modern-filters-btn {
          padding: 10px 16px;
          min-height: 40px;

          .btn-content {
            gap: 6px;

            .btn-icon {
              font-size: 18px;
              width: 18px;
              height: 18px;
            }

            .btn-text {
              font-size: 13px;
            }
          }

          .filters-badge {
            min-width: 18px;
            height: 18px;
            font-size: 11px;
          }
        }

        .view-controls-group {
          .modern-view-toggle .mat-button-toggle {
            min-width: 40px;
            height: 40px;

            mat-icon {
              font-size: 18px;
              height: 18px;
              width: 18px;
            }
          }
        }

        .secondary-actions .refresh-btn {
          width: 40px;
          height: 40px;

          mat-icon {
            font-size: 18px;
            width: 18px;
            height: 18px;
          }
        }
      }
    }
  }
}

