// ===============================================
// TOOLBAR DE RECHERCHE SAAS MODERNE
// ===============================================

  .modern-search-toolbar {
    background: #ffffff !important;
    color: #1a202c !important;
    border-radius: 16px;
    padding: 20px 24px; // PADDING UNIFORME
    border: 1px solid #e2e8f0;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);

    // FORCE THÈME CLAIR ABSOLU
    *, *::before, *::after {
      color-scheme: light !important;
      background: transparent !important;
      color: inherit !important;
    }

    // =============================================
    // FORCE BRUTALE HAUTEUR 48PX - TOUS LES CHAMPS
    // =============================================

    // SEARCH FIELD - Force à 48px
    .modern-search-field {
      .mat-mdc-form-field,
      .mat-mdc-form-field .mat-mdc-text-field-wrapper,
      .mat-mdc-form-field .mat-mdc-form-field-flex,
      .mat-mdc-form-field .mat-mdc-form-field-infix {
        height: 48px !important;
        max-height: 48px !important;
        min-height: 48px !important;
        line-height: 48px !important;
      }

      .mat-mdc-form-field input {
        height: 48px !important;
        line-height: 48px !important;
        padding-top: 0 !important;
        padding-bottom: 0 !important;
      }

      .mat-mdc-form-field-subscript-wrapper {
        display: none !important;
        height: 0 !important;
      }
    }

    // SORT FIELD - Force à 48px
    .modern-sort-field {
      .mat-mdc-form-field,
      .mat-mdc-form-field .mat-mdc-text-field-wrapper,
      .mat-mdc-form-field .mat-mdc-form-field-flex,
      .mat-mdc-form-field .mat-mdc-form-field-infix {
        height: 48px !important;
        max-height: 48px !important;
        min-height: 48px !important;
        line-height: 48px !important;
      }

      .mat-mdc-form-field-subscript-wrapper {
        display: none !important;
        height: 0 !important;
      }

      .mat-mdc-select-trigger {
        height: 48px !important;
        line-height: 48px !important;
      }
    }

    // BOUTONS - Force à 48px
    .modern-filters-btn,
    .refresh-btn {
      height: 48px !important;
      max-height: 48px !important;
      min-height: 48px !important;
      box-sizing: border-box !important;
    }

    // VIEW TOGGLE - Force à 48px
    .modern-view-toggle {
      height: 48px !important;
      max-height: 48px !important;
      min-height: 48px !important;

      .mat-button-toggle {
        height: 48px !important;
        max-height: 48px !important;
        min-height: 48px !important;
        line-height: 48px !important;
      }
    }

     .toolbar-content {
     display: flex;
     align-items: center;
     justify-content: space-between; // DISTRIBUTION ÉQUILIBRÉE GAUCHE/DROITE
     gap: 2%; // GAP EN POURCENTAGE
     flex-wrap: nowrap; // PAS DE WRAP SUR DESKTOP
     min-height: 48px; // HAUTEUR MINIMALE pour alignement parfait

         // Section gauche - Recherche principale (75% de l'espace)
     .toolbar-left {
       flex: 1 1 75%; // 75% DE L'ESPACE DISPONIBLE - BARRE PLUS LARGE
       min-width: 0; // PERMET RÉTRÉCISSEMENT COMPLET
       display: flex;
       align-items: flex-end; // Alignement sur la base pour cohérence
       gap: 12px;
       height: 48px; // HAUTEUR FIXE pour alignement parfait

       // Groupe de recherche dans la section gauche
       .search-group {
         display: flex;
         align-items: flex-end; // Alignement sur la base
         height: 48px;
         width: 100%; // PREND TOUTE LA LARGEUR DISPONIBLE DANS TOOLBAR-LEFT

           .modern-search-field {
    min-width: 0; // PERMET RÉTRÉCISSEMENT COMPLET
    width: 100%; // PREND TOUTE LA LARGEUR DU GROUPE
    flex: 1 1 auto; // GRANDIT ET RÉTRÉCIT SELON BESOIN
           height: 48px !important; // HAUTEUR FIXE BRUTALE
           max-height: 48px !important;
           min-height: 48px !important;

           // Masquer les subscripts
           .mat-mdc-form-field-subscript-wrapper {
             display: none;
           }

           // Style du champ
           .mat-mdc-form-field-outline {
             color: #e2e8f0 !important;
           }

           .mat-mdc-form-field-focus-overlay {
             background: #242e54 !important; // BLEU SORBONNE
             opacity: 0.1;
           }

           input {
             color: #1a202c !important;
             caret-color: #242e54 !important; // BLEU SORBONNE
           }

           .mat-mdc-form-field-icon-suffix {
             mat-icon {
               color: #64748b !important;

               &:hover {
                 color: #242e54 !important; // BLEU SORBONNE
               }
             }
           }
         }
       }
     }

    // Section droite - alignement parfait (25% de l'espace)
    .toolbar-right {
      display: flex;
      align-items: flex-end; // Alignement sur la base pour tous les composants
      justify-content: flex-end;
      gap: 0.5%; // GAP RÉDUIT EN POURCENTAGE
      flex-wrap: nowrap; // PAS DE WRAP POUR LES CONTRÔLES
      height: 48px; // HAUTEUR FIXE pour alignement parfait
      min-height: 48px;
      flex: 0 1 25%; // 25% DE L'ESPACE MAXIMUM - PLUS COMPACT

             // ANCIEN GROUPE DE RECHERCHE SUPPRIMÉ - MAINTENANT À GAUCHE

      // Groupe de filtres - alignement parfait
      .filters-group {
        display: flex;
        align-items: flex-end; // Alignement sur la base
        height: 48px;

        .modern-filters-btn {
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          gap: 8px;
          padding: 0 20px !important;
          background: #f8fafc !important;
          border: 2px solid #e2e8f0 !important;
          border-radius: 12px;
          color: #475569 !important;
          font-weight: 600;
          font-size: 14px;
          cursor: pointer;
          transition: all 0.2s ease;
          position: relative;
          // HAUTEUR FIXE BRUTALE
          height: 48px !important;
          max-height: 48px !important;
          min-height: 48px !important;
          width: auto !important;
          box-sizing: border-box !important;

          // Contenu du bouton
          .btn-content {
            display: flex;
            align-items: center;
            gap: 8px;

            .btn-icon {
              color: #242e54 !important; // BLEU SORBONNE
              font-size: 20px;
              width: 20px;
              height: 20px;
            }

            .btn-text {
              color: #475569 !important;
              font-weight: 600;
            }
          }

          // Badge de comptage
          .filters-badge {
            background: #242e54 !important; // BLEU SORBONNE
            color: #ffffff !important;
            border-radius: 50%;
            min-width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
            margin-left: 4px;
          }

          // État normal
          &:hover {
            background: #f1f5f9 !important;
            border-color: #242e54 !important; // BLEU SORBONNE
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(36, 46, 84, 0.1); // BLEU SORBONNE RGBA
          }

          // État avec filtres actifs
          &.has-filters {
            background: linear-gradient(135deg, #eff6ff 0%, #f0f9ff 100%) !important;
            border-color: #242e54 !important; // BLEU SORBONNE
            box-shadow: 0 0 0 1px rgba(36, 46, 84, 0.1); // BLEU SORBONNE RGBA

            .btn-content {
              .btn-text {
                color: #242e54 !important; // BLEU SORBONNE
              }
            }
          }
        }
      }

      // Groupe de contrôles d'affichage - alignement parfait
      .view-controls-group {
        display: flex;
        align-items: flex-end; // Alignement sur la base
        gap: 8px; // GAP RÉDUIT POUR PLUS DE COMPACITÉ
        height: 48px;
        flex: 1 1 auto; // UTILISE L'ESPACE DISPONIBLE

                          .modern-view-toggle {
          border-radius: 12px;
          overflow: hidden;
          border: 2px solid #e2e8f0;
          height: 48px !important; // HAUTEUR FIXE BRUTALE
          max-height: 48px !important;
          min-height: 48px !important;
          width: auto !important; // LARGEUR FLEXIBLE
          min-width: 0; // PERMET RÉTRÉCISSEMENT COMPLET
          flex: 0 0 auto; // TAILLE NATURELLE
           display: flex !important;
           align-items: center !important;
           // PAS DE BOX-SHADOW QUI BOUGE

           // SUPPRESSION ULTRA-AGGRESSIVE DE TOUTES LES ANIMATIONS
           animation: none !important;
           transition: none !important;
           transform: none !important;

                      ::ng-deep .mat-button-toggle {
            border: none !important;
            background: #ffffff !important;
            color: #64748b !important;
            width: 48px !important; // LARGEUR COMPACTE MAIS UTILISABLE
            flex: 1 1 auto; // RÉPARTITION ÉQUITABLE
             height: 48px !important; // HAUTEUR FIXE BRUTALE
             max-height: 48px !important;
             min-height: 48px !important;
             display: flex !important;
             align-items: center !important;
             justify-content: center !important;
             // SUPPRESSION ULTRA-AGGRESSIVE DE TOUTES LES ANIMATIONS
             transition: none !important;
             animation: none !important;
             transform: none !important;
             position: relative !important;

             // SUPPRESSION COMPLÈTE DU CHECKBOX
             .mat-button-toggle-checkbox-wrapper,
             .mat-pseudo-checkbox,
             .mat-button-toggle-checkbox-wrapper .mat-pseudo-checkbox {
               display: none !important;
               visibility: hidden !important;
               opacity: 0 !important;
               width: 0 !important;
               height: 0 !important;
               position: absolute !important;
               z-index: -9999 !important;
             }

             .mat-button-toggle-label-content {
               line-height: 48px !important;
               height: 48px !important;
               max-height: 48px !important;
               min-height: 48px !important;
               display: flex !important;
               align-items: center !important;
               justify-content: center !important;
               padding: 0 !important;
               margin: 0 !important;
               position: relative !important;
               text-align: center !important;
               overflow: hidden !important;

               mat-icon {
                 font-size: 22px !important;
                 height: 22px !important;
                 width: 22px !important;
                 color: #64748b !important;
                 // SUPPRESSION ULTRA-AGGRESSIVE DE TOUTES LES ANIMATIONS
                 transition: none !important;
                 animation: none !important;
                 position: absolute !important;
                 top: 50% !important;
                 left: 50% !important;
                 transform: translate(-50%, -50%) !important;
                 margin: 0 !important;
                 padding: 0 !important;
                 display: flex !important;
                 align-items: center !important;
                 justify-content: center !important;
               }
             }

             &.mat-button-toggle-checked {
               background: #242e54 !important; // BLEU SORBONNE
               color: #ffffff !important;
               // SUPPRESSION ULTRA-AGGRESSIVE DE TOUTES LES ANIMATIONS
               transition: none !important;
               animation: none !important;
               transform: none !important;

               .mat-button-toggle-label-content mat-icon {
                 color: #ffffff !important;
                 text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) !important;
                 transform: translate(-50%, -50%) !important; // MAINTENIR LE CENTRAGE
                 // SUPPRESSION ULTRA-AGGRESSIVE DE TOUTES LES ANIMATIONS
                 transition: none !important;
                 animation: none !important;
               }

               // SUPPRESSION COMPLÈTE DU CHECKBOX POUR L'ÉTAT CHECKED AUSSI
               .mat-button-toggle-checkbox-wrapper,
               .mat-pseudo-checkbox {
                 display: none !important;
                 visibility: hidden !important;
                 opacity: 0 !important;
                 width: 0 !important;
                 height: 0 !important;
               }
             }

             &:hover:not(.mat-button-toggle-checked) {
               background: #f8fafc !important;
               // SUPPRESSION ULTRA-AGGRESSIVE DE TOUTES LES ANIMATIONS
               transition: none !important;
               animation: none !important;
               transform: none !important;

               .mat-button-toggle-label-content mat-icon {
                 color: #242e54 !important;
                 transform: translate(-50%, -50%) !important; // MAINTENIR LE CENTRAGE
                 // SUPPRESSION ULTRA-AGGRESSIVE DE TOUTES LES ANIMATIONS
                 transition: none !important;
                 animation: none !important;
               }
             }

             &:active {
               // SUPPRESSION ULTRA-AGGRESSIVE DE TOUTES LES ANIMATIONS
               transition: none !important;
               animation: none !important;
               transform: none !important;

               .mat-button-toggle-label-content mat-icon {
                 transform: translate(-50%, -50%) !important; // MAINTENIR LE CENTRAGE
                 // SUPPRESSION ULTRA-AGGRESSIVE DE TOUTES LES ANIMATIONS
                 transition: none !important;
                 animation: none !important;
               }
             }
           }
         }

                         .modern-sort-field {
          min-width: 0; // PERMET RÉTRÉCISSEMENT COMPLET
          width: 100%; // UTILISE L'ESPACE DISPONIBLE
          flex: 1 1 auto; // GRANDIT ET RÉTRÉCIT DANS SON CONTENEUR
          max-width: 200px; // LIMITE MAXIMALE
           height: 48px !important; // HAUTEUR FIXE BRUTALE
           max-height: 48px !important;
           min-height: 48px !important;

           // FORCE BRUTALE du container Material Select
           ::ng-deep .mat-mdc-form-field {
             height: 48px !important;
             max-height: 48px !important;
             min-height: 48px !important;
             display: flex !important;
             align-items: center !important;

             .mat-mdc-text-field-wrapper {
               height: 48px !important;
               max-height: 48px !important;
               min-height: 48px !important;
               display: flex !important;
               align-items: center !important;

               .mat-mdc-form-field-flex {
                 height: 48px !important;
                 max-height: 48px !important;
                 min-height: 48px !important;
                 align-items: center !important;

                 .mat-mdc-form-field-infix {
                   height: 48px !important;
                   max-height: 48px !important;
                   min-height: 48px !important;
                   padding: 0 16px !important;
                   display: flex !important;
                   align-items: center !important;
                 }
               }
             }

             // SUPPRIMER LES ÉLÉMENTS QUI AJOUTENT DE LA HAUTEUR
             .mat-mdc-form-field-subscript-wrapper {
               display: none !important;
               height: 0 !important;
             }

             .mat-mdc-form-field-bottom-align {
               display: none !important;
               height: 0 !important;
             }

             // FORCE LE SELECT
             .mat-mdc-select {
               height: 48px !important;
               max-height: 48px !important;
               min-height: 48px !important;
               line-height: 48px !important;
             }

             // FORCE LE LABEL
             .mdc-floating-label {
               height: auto !important;
               line-height: normal !important;
             }
           }

           .mat-mdc-form-field-subscript-wrapper {
             display: none;
           }

           .mat-mdc-form-field-outline {
             color: #e2e8f0 !important;
           }

           .mat-mdc-select {
             color: #1a202c !important;
             height: 48px !important;
             line-height: 48px !important;
           }

           .mat-mdc-form-field-focus-overlay {
             background: #242e54 !important; // BLEU SORBONNE
             opacity: 0.1;
           }
         }
      }

             // Actions secondaires - alignement parfait
       .secondary-actions {
         display: flex;
         align-items: flex-end; // Alignement sur la base
         height: 48px;

         .refresh-btn {
           width: 48px;
           height: 48px; // HAUTEUR FIXE pour alignement
           border-radius: 12px;
           background: #f8fafc !important;
           border: 2px solid #e2e8f0 !important;
           color: #242e54 !important; // BLEU SORBONNE
           transition: all 0.2s ease;
           display: flex;
           align-items: center;
           justify-content: center;

           &:hover {
             background: #f1f5f9 !important;
             border-color: #242e54 !important; // BLEU SORBONNE
             transform: translateY(-1px);
             box-shadow: 0 4px 12px rgba(36, 46, 84, 0.1); // BLEU SORBONNE RGBA
           }

           mat-icon {
             color: #242e54 !important; // BLEU SORBONNE
             font-size: 20px;
             width: 20px;
             height: 20px;
           }
         }
       }
    }
  }
}

// ===============================================
// RESPONSIVE
// ===============================================

// RESPONSIVE BASÉ SUR POURCENTAGES - PLUS FLUIDE
@media (max-width: 1200px) {
  .modern-search-toolbar {
    .toolbar-content {
      gap: 1.5%; // GAP EN POURCENTAGE

      .toolbar-left {
        flex: 1 1 72%; // 72% DE L'ESPACE
      }

      .toolbar-right {
        flex: 0 1 28%; // 28% DE L'ESPACE
        gap: 0.5%;

        .view-controls-group {
          gap: 6px; // GAP RÉDUIT

          .modern-sort-field {
            max-width: 180px; // LIMITE AJUSTÉE
          }
        }
      }
    }
  }
}

@media (max-width: 1024px) {
  .modern-search-toolbar {
    .toolbar-content {
      gap: 1%; // GAP ENCORE PLUS RÉDUIT

      .toolbar-left {
        flex: 1 1 68%; // 68% DE L'ESPACE - RECHERCHE RESTE PRIORITAIRE
      }

      .toolbar-right {
        flex: 0 1 32%; // 32% DE L'ESPACE
        gap: 0.3%;

        .view-controls-group {
          gap: 4px;

          .modern-sort-field {
            max-width: 160px;
          }
        }
      }
    }
  }
}

 @media (max-width: 768px) {
   .modern-search-toolbar {
     .toolbar-content {
       flex-direction: column;
       align-items: stretch;
       gap: 16px; // GAP RÉDUIT

       .toolbar-left {
         min-width: auto;
         justify-content: center;
         width: 100%; // PREND TOUTE LA LARGEUR

         .search-group {
           width: 100%;

           .modern-search-field {
             min-width: auto;
             width: 100%; // PREND TOUTE LA LARGEUR DISPONIBLE
             max-width: 100%;
           }
         }
       }

      .toolbar-right {
        justify-content: center;
        flex-wrap: wrap;
        width: 100%; // PREND TOUTE LA LARGEUR

        .filters-group,
        .view-controls-group,
        .secondary-actions {
          flex: 0 0 auto; // TAILLE NATURELLE
          justify-content: center;
        }

        .view-controls-group {
          gap: 8px;

          .modern-sort-field {
            min-width: 160px;
            width: auto;
          }
        }
      }
    }
  }
}

// NOUVEAU BREAKPOINT - ÉCRANS MOYENS/PETITS
@media (max-width: 900px) {
  .modern-search-toolbar {
    .toolbar-content {
      gap: 0.8%; // GAP MINIMAL

      .toolbar-left {
        flex: 1 1 65%; // 65% - RECHERCHE RESTE LARGE
      }

      .toolbar-right {
        flex: 0 1 35%; // 35% POUR LES CONTRÔLES
        gap: 0.2%;
        flex-wrap: wrap; // PERMET LE WRAP SI NÉCESSAIRE

        .view-controls-group {
          gap: 2px;

          .modern-sort-field {
            max-width: 140px;
          }

          .modern-view-toggle {
            min-width: 90px !important;
          }
        }
      }
    }
  }
}

@media (max-width: 480px) {
  .modern-search-toolbar {
    padding: 16px 20px; // PADDING RÉDUIT

    .toolbar-content {
      gap: 12px;

      .toolbar-left {
        width: 100%;

        .search-group {
          width: 100%;

          .modern-search-field {
            width: 100%;
            min-width: auto;
            max-width: 100%;
          }
        }
      }

      .toolbar-right {
        width: 100%;
        gap: 8px;

        .filters-group .modern-filters-btn {
          padding: 8px 12px;
          height: 44px !important; // HAUTEUR RÉDUITE SUR TRÈS PETITS ÉCRANS
          max-height: 44px !important;
          min-height: 44px !important;

          .btn-content {
            gap: 6px;

            .btn-icon {
              font-size: 18px;
              width: 18px;
              height: 18px;
            }

            .btn-text {
              font-size: 13px;
            }
          }

          .filters-badge {
            min-width: 18px;
            height: 18px;
            font-size: 11px;
          }
        }

        .view-controls-group {
          gap: 6px;

          .modern-view-toggle {
            height: 44px !important;
            max-height: 44px !important;
            min-height: 44px !important;
            min-width: 84px !important;

            ::ng-deep .mat-button-toggle {
              width: 42px !important;
              height: 44px !important;
              max-height: 44px !important;
              min-height: 44px !important;

              .mat-button-toggle-label-content mat-icon {
                font-size: 18px;
                height: 18px;
                width: 18px;
              }
            }
          }

          .modern-sort-field {
            min-width: 120px;
            height: 44px !important;
            max-height: 44px !important;
            min-height: 44px !important;
          }
        }

        .secondary-actions .refresh-btn {
          width: 44px;
          height: 44px;

          mat-icon {
            font-size: 18px;
            width: 18px;
            height: 18px;
          }
        }
      }
    }
  }
}

